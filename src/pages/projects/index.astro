---
import MainLayout from "@/layouts/main-layout.astro";
import ProjectCard from "@/components/cards/project-card.astro";
import { getCollection } from "astro:content";
import { siteConfig } from "@/config/site";

const projects = await getCollection("projects");

// Generate CollectionPage schema markup for projects index
const projectsIndexLd = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  name: "Projects - Yokesh K.S. Portfolio",
  description:
    "Explore my portfolio of AI-powered applications and intelligent tools",
  url: `${siteConfig.url}/projects`,
  author: {
    "@type": "Person",
    name: "Yokesh K.S.",
    url: siteConfig.url,
  },
  mainEntity: {
    "@type": "ItemList",
    name: "Portfolio Projects",
    description:
      "Collection of AI-powered applications and intelligent tools developed by Yokesh K.S.",
    numberOfItems: projects.length,
    itemListElement: projects.map((project, index) => ({
      "@type": "ListItem",
      position: index + 1,
      item: {
        "@type": "CreativeWork",
        name: project.data.title,
        description: project.data.description,
        url: `${siteConfig.url}/projects/${project.id}`,
        programmingLanguage: project.data.technologies,
        author: {
          "@type": "Person",
          name: "Yokesh K.S.",
          url: siteConfig.url,
        },
        codeRepository: project.data.github,
        sameAs:
          project.data.website && project.data.website !== "#"
            ? project.data.website
            : undefined,
      },
    })),
  },
  breadcrumb: {
    "@type": "BreadcrumbList",
    itemListElement: [
      {
        "@type": "ListItem",
        position: 1,
        name: "Home",
        item: siteConfig.url,
      },
      {
        "@type": "ListItem",
        position: 2,
        name: "Projects",
        item: `${siteConfig.url}/projects`,
      },
    ],
  },
};
---

<MainLayout
  title="Projects"
  description="Explore my portfolio of AI-powered applications and intelligent tools"
>
  <section
    class="py-16 "
  >
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 my-12">
      <div class="mx-auto mb-12 flex max-w-2xl flex-col items-center justify-center space-y-4 text-center sm:mb-16">
        <h2 class="font-semibold text-2xl md:text-3xl lg:text-4xl">All Projects</h2>
        <p class="text-muted-foreground text-xl">
          Explore my portfolio of AI-powered applications, developer tools, and full-stack projects.
        </p>
      </div>

      <div class="grid gap-6 md:grid-cols-2 lg:gap-y-10 xl:grid-cols-4">
        {
          projects.map((project) => (
            <ProjectCard project={project} />
          ))
        }
      </div>
    </div>
  </section>
</MainLayout>

<script type="application/ld+json" set:html={JSON.stringify(projectsIndexLd)} />
