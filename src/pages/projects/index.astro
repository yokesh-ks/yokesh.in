---
import MainLayout from "@/layouts/main-layout.astro";
import ProjectCard from "@/components/cards/project-card.astro";
import { getCollection } from "astro:content";
import { siteConfig } from "@/config/site";

const projects = await getCollection("projects");

// Generate CollectionPage schema markup for projects index
const projectsIndexLd = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  name: "Projects - Yokesh K.S. Portfolio",
  description:
    "Explore my portfolio of AI-powered applications and intelligent tools",
  url: `${siteConfig.url}/projects`,
  author: {
    "@type": "Person",
    name: "Yokesh K.S.",
    url: siteConfig.url,
  },
  mainEntity: {
    "@type": "ItemList",
    name: "Portfolio Projects",
    description:
      "Collection of AI-powered applications and intelligent tools developed by Yokesh K.S.",
    numberOfItems: projects.length,
    itemListElement: projects.map((project, index) => ({
      "@type": "ListItem",
      position: index + 1,
      item: {
        "@type": "CreativeWork",
        name: project.data.title,
        description: project.data.description,
        url: `${siteConfig.url}/projects/${project.id}`,
        programmingLanguage: project.data.technologies,
        author: {
          "@type": "Person",
          name: "Yokesh K.S.",
          url: siteConfig.url,
        },
        codeRepository: project.data.github,
        sameAs:
          project.data.website && project.data.website !== "#"
            ? project.data.website
            : undefined,
      },
    })),
  },
  breadcrumb: {
    "@type": "BreadcrumbList",
    itemListElement: [
      {
        "@type": "ListItem",
        position: 1,
        name: "Home",
        item: siteConfig.url,
      },
      {
        "@type": "ListItem",
        position: 2,
        name: "Projects",
        item: `${siteConfig.url}/projects`,
      },
    ],
  },
};
---

<MainLayout
  title="Projects"
  description="Explore my portfolio of AI-powered applications and intelligent tools"
>
  <section
    class="py-16 "
  >
    <div class="container my-12 max-w-6xl mx-auto">
      <div class="mb-8">
        <h2 class="font-heading text-2xl font-bold mb-6">Projects</h2>
      </div>

      <!-- All Project Cards Grid -->
      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8"
      >
        {
          projects.map((project) => (
            <ProjectCard project={project} />
          ))
        }
      </div>
    </div>
  </section>
</MainLayout>

<script type="application/ld+json" set:html={JSON.stringify(projectsIndexLd)} />
