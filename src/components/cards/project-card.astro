---
import type { CollectionEntry } from 'astro:content'
import { Card, CardContent, CardTitle } from '@/components/ui/card'
import { Separator } from '@/components/ui/separator'

interface Props {
  project: CollectionEntry<'projects'>
}

const { project } = Astro.props

const categoryLabels: Record<string, string> = {
  ai: 'AI / ML',
  web: 'Web App',
  tool: 'Developer Tool',
}
---

<a href={`/projects/${project.id}`} class="block">
  <Card className="overflow-hidden rounded-none py-0 shadow-none transition-colors duration-300 hover:border-primary h-full">
    <CardContent className="px-0">
      <div class="bg-muted">
        {project.data.main_image_url ? (
          <img
            src={project.data.main_image_url}
            alt={project.data.title}
            class="h-auto w-full"
            loading="lazy"
          />
        ) : (
          <div class="flex items-center justify-center p-6">
            <span class="text-4xl font-bold text-muted-foreground/40">
              {project.data.title.charAt(0)}
            </span>
          </div>
        )}
      </div>
      <div class="space-y-3 px-6 py-5">
        <CardTitle className="text-lg">{project.data.title}</CardTitle>
        <Separator />
        <div class="text-muted-foreground">
          <p class="mb-2 font-medium text-base">{categoryLabels[project.data.category] ?? project.data.category}</p>
          <p class="line-clamp-2 text-sm">{project.data.description}</p>
        </div>
      </div>
    </CardContent>
  </Card>
</a>
