---
import { formatDate } from '@/lib/utils'
import type { CollectionEntry } from 'astro:content'

type Props = CollectionEntry<'blog'>

const post = Astro.props
---

<div class="border border-border bg-card text-card-foreground pt-0 shadow-none transition-colors duration-300 hover:border-primary">
  <!-- Featured Image -->
  <div class="overflow-hidden">
    <img
      class="w-full h-60 object-cover aspect-video"
      width="400"
      height="200"
      src={post.data.coverImage}
      alt={post.data.title}
      loading="lazy"
      transition:name={'img-' + post.id}
    />
  </div>

  <!-- Card Content -->
  <div class="p-6 space-y-3">
    <!-- Date and Category -->
    <div class="flex items-center justify-between">
      <time
        class="text-sm text-muted-foreground"
        datetime={post.data.pubDate.toISOString()}
        transition:name={'date-' + post.id}
      >
        {formatDate(post.data.pubDate)}
      </time>
      {
        post.data.category && (
          <span class="px-2 py-1 bg-primary/10 text-primary text-xs rounded-full">
            {post.data.category}
          </span>
        )
      }
    </div>

    <!-- Title -->
    <h2
      class="text-xl font-semibold leading-snug line-clamp-2"
      transition:name={'title-' + post.id}
    >
      <a href={`/blog/${post.id}`}>{post.data.title}</a>
    </h2>

    <!-- Description -->
    {
      post.data.description && (
        <p class="text-muted-foreground text-base leading-relaxed line-clamp-2">
          {post.data.description}
        </p>
      )
    }

    <!-- Read More -->
    <div class="pt-2">
      <a
        href={`/blog/${post.id}`}
        class="group inline-flex items-center gap-1 rounded-full bg-primary/10 text-primary text-sm font-medium px-6 py-2 hover:bg-primary/20 transition-colors duration-200"
      >
        Read Article
        <svg
          class="w-4 h-4 transition-transform duration-200 group-hover:translate-x-0.5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </div>
</div>
