---
import type { CollectionEntry } from 'astro:content'
import { Card, CardContent } from '@/components/ui/card'
import { Separator } from '@/components/ui/separator'

type Props = CollectionEntry<'guides'>

const slug = Astro.props.id
const guide = Astro.props.data

const getTechIcon = (title: string) => {
  const titleLower = title.toLowerCase()
  if (titleLower.includes('react')) return '\u269B\uFE0F'
  if (titleLower.includes('typescript') || titleLower.includes('ts')) return '\uD83D\uDD37'
  if (titleLower.includes('javascript') || titleLower.includes('js')) return '\uD83D\uDFE8'
  if (titleLower.includes('css') || titleLower.includes('tailwind')) return '\uD83C\uDFA8'
  if (titleLower.includes('astro')) return '\uD83D\uDE80'
  if (titleLower.includes('node')) return '\uD83D\uDFE2'
  return '\uD83D\uDCBB'
}

const techIcon = getTechIcon(guide.title)
---

<a href={`/snippets/${slug}/`} class="block">
  <Card className="overflow-hidden rounded-none py-0 shadow-none transition-colors duration-300 hover:border-primary h-full">
    <CardContent className="px-0">
      <div class="flex items-center gap-3 px-6 pt-5 pb-3">
        <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-md bg-primary/10 text-lg">
          {techIcon}
        </div>
        <div class="min-w-0 flex-1">
          <p class="font-semibold text-lg leading-tight" transition:name={'title-' + slug}>
            {guide.title}
          </p>
        </div>
      </div>
      <div class="px-6 pb-5">
        <Separator />
        {guide.description && (
          <p
            class="mt-3 text-sm text-muted-foreground line-clamp-2"
            transition:name={'desc-' + slug}
          >
            {guide.description}
          </p>
        )}
        <div class="mt-3 flex items-center justify-end">
          <span class="inline-flex items-center text-sm font-medium text-primary">
            View Code
            <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </span>
        </div>
      </div>
    </CardContent>
  </Card>
</a>
