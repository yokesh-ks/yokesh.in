---
import { buttonVariants } from '@/components/ui/button'
import { siteConfig } from '@/config/site'
import { cn } from '@/lib/utils'
import MainLayout from './main-layout.astro'

const slug = Astro.props.id
const { title, description, technologies, github, website } = Astro.props.data

const projectLd = {
  '@context': 'https://schema.org',
  '@type': 'CreativeWork',
  name: title,
  description: description,
  url: `${siteConfig.url}/projects/${slug}`,
  author: { '@type': 'Person', name: 'Yokesh K.S.', url: siteConfig.url },
  programmingLanguage: technologies,
  codeRepository: github,
  sameAs: website && website !== '#' ? website : undefined,
  breadcrumb: {
    '@type': 'BreadcrumbList',
    itemListElement: [
      { '@type': 'ListItem', position: 1, name: 'Home', item: siteConfig.url },
      {
        '@type': 'ListItem',
        position: 2,
        name: 'Projects',
        item: `${siteConfig.url}/projects`
      },
      {
        '@type': 'ListItem',
        position: 3,
        name: title,
        item: `${siteConfig.url}/projects/${slug}`
      }
    ]
  }
}
---

<MainLayout title={`${title} - Projects`} description={description}>
  <!-- Hero Section -->
  <section class="relative overflow-hidden pb-8 pt-16 lg:py-20">
    <div
      class="absolute inset-0 bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-indigo-950"
    >
    </div>

    <div class="container relative z-10 max-w-4xl">
      <!-- Back Navigation -->
      <div class="mb-8">
        <a
          href="/projects"
          class={cn(
            buttonVariants({ variant: 'ghost', size: 'sm' }),
            'text-muted-foreground hover:text-foreground transition-colors duration-300 group'
          )}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="mr-2 group-hover:-translate-x-1 transition-transform duration-300"
          >
            <path d="m15 18-6-6 6-6"></path>
          </svg>
          Back to Projects
        </a>
      </div>

      <!-- Project Header -->
      <div class="text-center mb-12">
        <h1
          class="font-heading text-3xl font-bold sm:text-4xl md:text-5xl !leading-[1.1] mb-6"
          transition:name={'title-' + slug}
        >
          {title}
        </h1>
      </div>
    </div>
  </section>

  <!-- Project Content -->
  <section
    class="py-8 "
  >
    <div class="container max-w-4xl">
      <div class="relative">
        <article
          class="prose prose-lg dark:prose-invert max-w-none prose-headings:font-heading prose-a:text-indigo-600 dark:prose-a:text-indigo-400 prose-a:no-underline hover:prose-a:underline prose-code:bg-gray-100 dark:prose-code:bg-gray-800 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-pre:bg-gray-900 dark:prose-pre:bg-gray-950 prose-pre:border prose-pre:border-gray-200 dark:prose-pre:border-gray-700 prose-blockquote:border-l-indigo-500 prose-blockquote:bg-indigo-50 dark:prose-blockquote:bg-indigo-950/30 prose-blockquote:px-6 prose-blockquote:py-4 prose-blockquote:rounded-r-lg"
        >
          <slot />
        </article>

        <!-- Tech Stack -->
        <div class="mb-8 mt-12">
          <h3 class="font-heading text-lg font-bold mb-4">Tech Stack</h3>
          <div class="flex flex-wrap gap-2">
            {
              technologies.map((tech: string) => (
                <span
                  class={`px-3 py-1 text-sm rounded-full ${
                    tech.includes('Python')
                      ? 'bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300'
                      : tech.includes('TypeScript') || tech.includes('Next.js')
                        ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300'
                        : tech.includes('React')
                          ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300'
                          : tech.includes('OpenAI') || tech.includes('GPT')
                            ? 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300'
                            : 'bg-gray-100 dark:bg-gray-900/30 text-gray-700 dark:text-gray-300'
                  }`}
                >
                  {tech}
                </span>
              ))
            }
          </div>
        </div>

        <!-- Project Footer -->
        <div class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-700">
          {
            (github || website) && (
              <div class="flex gap-4">
                {github && (
                  <a
                    href={github}
                    target="_blank"
                    rel="noopener noreferrer"
                    class={cn(
                      buttonVariants({ variant: 'outline' }),
                      'inline-flex items-center gap-2'
                    )}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4" />
                      <path d="M9 18c-4.51 2-5-2-7-2" />
                    </svg>
                    View Source
                  </a>
                )}
                {website && website !== '#' && (
                  <a
                    href={website}
                    target="_blank"
                    rel="noopener noreferrer"
                    class={cn(
                      buttonVariants({}),
                      'inline-flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white border-0'
                    )}
                  >
                    <span>Visit Website</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M15 3h6v6" />
                      <path d="M10 14 21 3" />
                      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                    </svg>
                  </a>
                )}
              </div>
            )
          }
        </div>
      </div>
    </div>
  </section>
</MainLayout>

<script type="application/ld+json" set:html={JSON.stringify(projectLd)} />
